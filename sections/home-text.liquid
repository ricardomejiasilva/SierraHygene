<section
  class="module-container {{ section.settings.style }}"
  data-section-id="{{ section.id }}" 
  data-section-type="text">

  <div class="module-inner">
    {% for block in section.blocks %}
      <div class="home-text-feature" {{ block.shopify_attributes }}>
        {% if block.settings.title != blank %}
          <h2 class="feature-title" 
              style="color: {{ block.settings.title_color }}; 
                     font-size: {{ block.settings.title_font_size }}px; 
                     font-style: {% if block.settings.title_italic %}italic{% else %}normal{% endif %};">
            {{ block.settings.title | escape }}
          </h2>
        {% endif %}

        {% if block.type == 'rich_text' and block.settings.content != blank %}
          <div class="rte home-text-content" 
               style="color: {{ block.settings.content_color }}; 
                      font-size: {{ block.settings.content_font_size }}px; 
                      font-style: {% if block.settings.content_italic %}italic{% else %}normal{% endif %};">
            {{ block.settings.content }}
          </div>
        {% endif %}

        {% if block.type == 'page' and block.settings.page != blank %}
          {% assign page_content = pages[block.settings.page].content %}
          {% if page_content != blank %}
            <div class="rte" 
                 style="color: {{ block.settings.content_color }}; 
                        font-size: {{ block.settings.content_font_size }}px; 
                        font-style: {% if block.settings.content_italic %}italic{% else %}normal{% endif %};">
              {{ pages[block.settings.page].content }}
            </div>
          {% endif %}
        {% endif %}
      </div>
    {% endfor %}
  </div>

</section>

<style>
  #shopify-section-{{ section.id }} .home-text-feature {
    text-align: left;
  }
  
  #shopify-section-{{ section.id }} .feature-title {
    font-size: 24px;
    font-style: normal;
    font-weight: 800;
    text-align: left;
  }
  
  #shopify-section-{{ section.id }} .home-text-content {
    text-align: left;
  }
  
  #shopify-section-{{ section.id }} .rte {
    text-align: left;
  }
  
  /* Remove all borders and dividing lines */
  #shopify-section-{{ section.id }} .home-text-feature {
    border: none;
    border-bottom: none;
    border-top: none;
  }
  
  #shopify-section-{{ section.id }} .module-container {
    border: none;
  }
  
  #shopify-section-{{ section.id }} .module-container.borders .home-text-feature {
    border: none !important;
  }
  
  /* Remove ::before pseudo-element line on top of text container */
  #shopify-section-{{ section.id }}::before,
  #shopify-section-{{ section.id }} .module-container::before,
  #shopify-section-{{ section.id }} .module-inner::before,
  #shopify-section-{{ section.id }} .home-text-feature::before {
    display: none !important;
    content: none !important;
  }
</style>

{% schema %}
{
  "name": "Rich text",
  "max_blocks": 10,
  "settings": [
    {
      "type": "select",
      "id": "style",
      "label": "Style",
      "options": [
        {
          "value": "default-style",
          "label": "Default"
        },
        {
          "value": "accent-style",
          "label": "Accent"
        },
        {
          "value": "contrast-style",
          "label": "Contrast"
        }
      ],
      "default": "default-style"
    },
    {
      "type": "checkbox",
      "id": "show_borders",
      "label": "Show border between features",
      "default": false
    }
  ],
  "blocks": [
    {
      "type": "rich_text",
      "name": "Text",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "This is an example of a headline, these can be used to break up paragraphs"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Text",
          "default": "<p>Lorem ipsum dolor sit amet consectetur. Commodo imperdiet nunc eget sed mi nisl id. Massa tincidunt phasellus sem pellentesque velit amet eget faucibus. Varius aenean ut aliquam tortor. Fusce lorem cursibus ut dignissim quis. Sit ut tellus egestas risus aliquiet placerat. Mauris malesuada volutpat et ultricies a elit. Adipiscing congue facilisi mauris ipsum at condimentum arcu consectetur.</p>"
        },
        {
          "type": "header",
          "content": "Heading Styling"
        },
        {
          "type": "color",
          "id": "title_color",
          "label": "Heading color",
          "default": "#000000"
        },
        {
          "type": "range",
          "id": "title_font_size",
          "label": "Heading font size",
          "min": 14,
          "max": 60,
          "step": 2,
          "default": 24,
          "unit": "px"
        },
        {
          "type": "checkbox",
          "id": "title_italic",
          "label": "Italic heading",
          "default": false
        },
        {
          "type": "header",
          "content": "Text Styling"
        },
        {
          "type": "color",
          "id": "content_color",
          "label": "Text color",
          "default": "#000000"
        },
        {
          "type": "range",
          "id": "content_font_size",
          "label": "Text font size",
          "min": 12,
          "max": 32,
          "step": 1,
          "default": 16,
          "unit": "px"
        },
        {
          "type": "checkbox",
          "id": "content_italic",
          "label": "Italic text",
          "default": false
        }
      ]
    },
    {
      "type": "page",
      "name": "Page",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "Page content"
        },
        {
          "type": "page",
          "id": "page",
          "label": "Text"
        },
        {
          "type": "header",
          "content": "Heading Styling"
        },
        {
          "type": "color",
          "id": "title_color",
          "label": "Heading color",
          "default": "#000000"
        },
        {
          "type": "range",
          "id": "title_font_size",
          "label": "Heading font size",
          "min": 14,
          "max": 60,
          "step": 2,
          "default": 24,
          "unit": "px"
        },
        {
          "type": "checkbox",
          "id": "title_italic",
          "label": "Italic heading",
          "default": false
        },
        {
          "type": "header",
          "content": "Text Styling"
        },
        {
          "type": "color",
          "id": "content_color",
          "label": "Text color",
          "default": "#000000"
        },
        {
          "type": "range",
          "id": "content_font_size",
          "label": "Text font size",
          "min": 12,
          "max": 32,
          "step": 1,
          "default": 16,
          "unit": "px"
        },
        {
          "type": "checkbox",
          "id": "content_italic",
          "label": "Italic text",
          "default": false
        }
      ]
    }
  ],
  "presets": [
    {
      "category": "Text",
      "name": "Rich text",
      "blocks": [
        {
          "type": "rich_text"
        }
      ]
    }
  ],
  "enabled_on": {
    "templates": [
      "index",
      "product",
      "page"
    ]
  }
}

{% endschema %}